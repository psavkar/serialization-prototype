workflow
  triggers
    trigger($key="http")
  steps
    template($if="{{steps.trigger.event.url.endsWith(`/favicon.ico`)}}")
      filter_favicon_requests($code="@steps/filter-favicon-requests.js")
    template($else)
      get_iss_position($code="@steps/get-iss-position.js")
      format_datetime($code="@steps/format_datetime.js")
      add_single_row(
        $key="google_sheets-add-single-row",
        rows="{{
          [
            steps.get_iss_position.$return_value.iss_position.latitude,
            steps.get_iss_position.$return_value.iss_position.longitude,
            steps.get_iss_position.$return_value.timestamp,
            steps.format_datetime.$return_value
        }}",
      )
      respond($code="@steps/respond.js")